<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Nunchucks Templating Docs</title>
  <link rel="stylesheet" href="./assets/styles.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/styles/github-dark.min.css" />
</head>
<body>
  <main class="wrapper">
    <nav>
      <a href="./index.html">Docs Home</a>
      <a href="./golang.html">Go Details</a>
      <a href="./templating.html">Templating Docs</a>
      <a href="./playground.html">Editor Demo</a>
    </nav>

    <section class="hero">
      <h1>Templating Reference</h1>
      <p>Modeled after Nunjucks templating docs, focused on Nunchucks implementation and parity work.</p>
      <p><small>Reference: <a href="https://mozilla.github.io/nunjucks/templating.html">mozilla.github.io/nunjucks/templating.html</a></small></p>
    </section>

    <section class="card" style="margin-top:1rem;">
      <h2>Pick A Language</h2>
      <p>Select runtime docs examples for the same template concepts.</p>
      <div class="lang-tabs" role="tablist" aria-label="Templating language selector">
        <button class="lang-tab is-active" data-lang="go" role="tab" aria-selected="true">Go</button>
        <button class="lang-tab" data-lang="ts" role="tab" aria-selected="false">TypeScript</button>
        <button class="lang-tab" data-lang="js" role="tab" aria-selected="false">JavaScript</button>
        <button class="lang-tab" data-lang="py" role="tab" aria-selected="false">Python</button>
        <button class="lang-tab" data-lang="dart" role="tab" aria-selected="false">Dart</button>
      </div>

      <div class="lang-panel is-active" data-lang="go" role="tabpanel">
<pre><code class="language-go">env := nunchucks.Configure(nunchucks.ConfigOptions{Path: "views"})
out, err := env.Render("app.njk", map[string]any{"user": map[string]any{"name": "sam"}})
if err != nil { panic(err) }
fmt.Println(out)</code></pre>
      </div>
      <div class="lang-panel" data-lang="ts" role="tabpanel" hidden>
<pre><code class="language-ts">import { configure, FileSystemLoader } from "@samuelbines/nunchucks";
const env = configure({ path: "views", loader: FileSystemLoader, watch: true, dev: true });
const html = env.render("app.njk", { user: { name: "sam" } });</code></pre>
      </div>
      <div class="lang-panel" data-lang="js" role="tabpanel" hidden>
<pre><code class="language-js">const html = nc.renderFromMap({
  template: "app.njk",
  files,
  context: { user: { name: "sam" } },
});</code></pre>
      </div>
      <div class="lang-panel" data-lang="py" role="tabpanel" hidden>
<pre><code class="language-python">import subprocess, json
html = subprocess.check_output([
  "nunchucks", "render", "-views", "./views", "-template", "app.njk",
  "-data", json.dumps({"user": {"name": "sam"}})
], text=True)</code></pre>
      </div>
      <div class="lang-panel" data-lang="dart" role="tabpanel" hidden>
<pre><code class="language-dart">final result = await Process.run('nunchucks', [
  'render', '-views', './views', '-template', 'app.njk',
  '-data', jsonEncode({'user': {'name': 'sam'}}),
]);</code></pre>
      </div>
    </section>

    <button class="project-open" data-open-project>Open App Files</button>
    <div class="project-backdrop" data-project-backdrop hidden></div>

    <div class="docs-layout" style="margin-top:1rem;">
      <div class="docs-content">
        <section class="card">
          <h2>Directory</h2>
          <p>Each item links to a detailed section with examples.</p>
          <ul class="toc">
            <li><a href="#core-topics">Core Topics</a></li>
            <li><a href="#tags">Tags</a></li>
            <li><a href="#expressions">Expressions</a></li>
            <li><a href="#globals">Global Functions</a></li>
            <li><a href="#builtin-filters">Builtin Filters</a></li>
          </ul>
          <p><strong>Core section links:</strong>
            <a href="#core-user-defined-templates-warning">User-Defined Templates Warning</a>,
            <a href="#core-file-extensions">File Extensions</a>,
            <a href="#core-syntax-highlighting">Syntax Highlighting</a>,
            <a href="#core-variables">Variables</a>,
            <a href="#core-filters">Filters</a>,
            <a href="#core-template-inheritance">Template Inheritance</a>,
            <a href="#core-super">super</a>,
            <a href="#core-keyword-arguments">Keyword Arguments</a>,
            <a href="#core-comments">Comments</a>,
            <a href="#core-whitespace-control">Whitespace Control</a>,
            <a href="#core-autoescaping">Autoescaping</a>
          </p>
        </section>

        <section id="core-topics" class="card" style="margin-top:1rem;">
          <h2>Core Topics</h2>
          <h3 id="core-user-defined-templates-warning">User-Defined Templates Warning</h3>
          <p>Treat templates as executable input. Do not render untrusted template source without a sandbox boundary.</p>
<pre><code class="language-bash">go run ./cmd/nunchucks render -views ./views -template app.njk -data '{\"safe\":true}'</code></pre>

          <h3 id="core-file-extensions">File Extensions</h3>
          <p>Use <code>.njk</code> for templates and reserve <code>.html</code> / target formats for rendered output.</p>
<pre><code class="language-text">views/\n  layout.njk\n  app.njk\n  partials/user-card.njk</code></pre>

          <h3 id="core-syntax-highlighting">Syntax Highlighting</h3>
          <p>This docs site uses highlight.js with <code>language-django</code> for template syntax. The repo also ships VS Code workspace config in <code>.vscode/settings.json</code> and <code>.vscode/extensions.json</code> for <code>.njk</code> highlighting.</p>
<pre><code class="language-django">{% if user.isAdmin %}{{ \"ok\" | upper }}{% endif %}</code></pre>

          <h3 id="core-variables">Variables</h3>
          <p>Variables resolve from context and local scope. Dot-path lookups are supported.</p>
<pre><code class="language-django">Hello {{ user.name | default("guest", true) }}</code></pre>

          <h3 id="core-filters">Filters</h3>
          <p>Filters transform values and chain left-to-right.</p>
<pre><code class="language-django">{{ title | trim | lower | capitalize }}
{% filter upper %}hello {{ user.name }}{% endfilter %}</code></pre>

          <h3 id="core-template-inheritance">Template Inheritance</h3>
          <p>Use <code>extends</code> + <code>block</code> for layouts and <code>super()</code> to include parent output.</p>
<pre><code class="language-django">{% extends "layout.njk" %}
{% block body %}
  {{ super() }}
  <p>Page body</p>
{% endblock %}</code></pre>

          <h3 id="core-super">super</h3>
          <p><code>super()</code> inserts parent block output so child templates can append rather than replace.</p>
<pre><code class="language-django">{% block header %}\n  {{ super() }}\n  <small>Subheader</small>\n{% endblock %}</code></pre>

          <h3 id="core-keyword-arguments">Keyword Arguments</h3>
          <p>Macros and callable expressions support named arguments.</p>
<pre><code class="language-django">{% macro badge(text, kind="info") %}[{{ kind }}] {{ text }}{% endmacro %}
{{ badge("API", kind="success") }}</code></pre>

          <h3 id="core-comments">Comments</h3>
          <p>Comments do not render output and are useful for in-template notes.</p>
<pre><code class="language-django">{# rendered output ignores this #}\nVisible value</code></pre>

          <h3 id="core-whitespace-control">Whitespace Control</h3>
          <p>Whitespace in templates impacts generated output, especially config files.</p>
<pre><code class="language-django">{% if enabled %}\nvalue: {{ value }}\n{% endif %}</code></pre>

          <h3 id="core-autoescaping">Autoescaping</h3>
          <p>Use <code>escape</code>, <code>forceescape</code>, and <code>safe</code> intentionally when rendering HTML.</p>
<pre><code class="language-django">{{ html | escape }}\n{{ trustedHtml | safe }}</code></pre>
        </section>

        <section id="tags" class="card" style="margin-top:1rem;">
          <h2>Tags</h2>
          <h3 id="tag-if">if</h3>
<pre><code class="language-django">{% if user %}Hi {{ user.name }}{% else %}Hi guest{% endif %}</code></pre>

          <h3 id="tag-for">for</h3>
<pre><code class="language-django">{% for item in items %}
  {{ loop.index0 }}:{{ item }}
{% endfor %}</code></pre>

          <h3 id="tag-macro">macro + call</h3>
<pre><code class="language-django">{% macro panel(kind="info") %}
<section class="panel {{ kind }}">{{ caller() }}</section>
{% endmacro %}
{% call panel("success") %}inside{% endcall %}</code></pre>

          <h3 id="tag-include">include + import</h3>
<pre><code class="language-django">{% import "macros/ui.njk" as ui %}
{% include "partials/user-card.njk" with context %}
{% include "partials/optional.njk" ignore missing %}</code></pre>

          <h3 id="tag-raw">raw + verbatim + filter block</h3>
<pre><code class="language-django">{% raw %}{{ untouched }}{% endraw %}
{% verbatim %}{% if x %}y{% endif %}{% endverbatim %}
{% filter upper %}hello {{ user.name }}{% endfilter %}</code></pre>
        </section>

        <section id="expressions" class="card" style="margin-top:1rem;">
          <h2>Expressions</h2>
          <h3 id="expr-math">Math</h3>
<pre><code class="language-django">{{ 1 + 2 * 3 }}
{{ (1 + 2) * 3 }}</code></pre>

          <h3 id="expr-comparisons">Comparisons + is/in</h3>
<pre><code class="language-django">{{ 2 < 3 < 4 }}
{{ role is "admin" }}
{{ 2 in nums }}
{{ 5 not in nums }}</code></pre>

          <h3 id="expr-logic">Logic + if expression</h3>
<pre><code class="language-django">{{ isAuth and isAdmin }}
{{ "yes" if user.isAdmin else "no" }}</code></pre>

          <h3 id="expr-function-calls">Function Calls</h3>
<pre><code class="language-django">{{ range(1, 8, 2) | join(",") }}</code></pre>
        </section>

        <section id="globals" class="card" style="margin-top:1rem;">
          <h2>Global Functions</h2>
          <h3 id="global-range">range([start], stop, [step])</h3>
<pre><code class="language-django">{{ range(5) | join(",") }}
{{ range(1, 8, 2) | join(",") }}
{{ range(5, 0, -2) | join(",") }}</code></pre>
          <p><code>&lt;todo still: cycler and joiner docs when implemented&gt;</code></p>
        </section>

        <section id="builtin-filters" class="card" style="margin-top:1rem;">
          <h2>Builtin Filters</h2>
          <p>Real code examples for built-in filters (grouped by purpose).</p>

          <h3>Strings + Formatting</h3>
<pre><code class="language-django">{{ " nunchucks " | trim | capitalize }}
{{ "nunchucks" | upper }}
{{ "NUNCHUCKS" | lower }}
{{ "hello world" | title }}
{{ "hello world" | center(20) }}
{{ "long text for docs" | truncate(10, false, "...") }}
{{ "a\nb" | nl2br }}
{{ "<b>hi</b>" | striptags }}</code></pre>

          <h3>Collections</h3>
<pre><code class="language-django">{{ nums | first }}
{{ nums | last }}
{{ nums | length }}
{{ nums | join("-") }}
{{ nums | reverse | join(",") }}
{{ nums | batch(2) | length }}
{{ nums | slice(3) | length }}
{{ users | sort(false, false, "name") | first | dump }}
{{ users | groupby("role", "none") | length }}</code></pre>

          <h3>Selection Filters</h3>
<pre><code class="language-django">{{ nums | select("odd") | length }}
{{ nums | reject("odd") | length }}
{{ users | selectattr("active") | length }}
{{ users | rejectattr("active") | length }}
{{ users | selectattr("age", "divisibleby", 2) | length }}</code></pre>

          <h3>Numbers + Types</h3>
<pre><code class="language-django">{{ -4 | abs }}
{{ "3.14" | float }}
{{ "42" | int }}
{{ nums | sum }}
{{ 3.14159 | round(2) }}
{{ value | string }}</code></pre>

          <h3>Escaping + URLs + Debug</h3>
<pre><code class="language-django">{{ html | escape }}
{{ html | forceescape }}
{{ trusted | safe }}
{{ "a b" | urlencode }}
{{ textWithUrl | urlize }}
{{ body | wordcount }}
{{ data | dictsort("value", false, true) | first | first }}
{{ state | dump }}</code></pre>

          <p><small><code>&lt;todo still: publish per-filter parity status table and edge-case notes&gt;</code></small></p>
        </section>
      </div>

      <aside class="project-pane" data-project-pane>
        <div class="project-pane-header">
          <h2>App Files</h2>
          <button class="project-close" data-close-project aria-label="Close project files">Close</button>
        </div>
        <p class="project-pane-sub">This multi-file example maps directly to the sections on the left.</p>

        <div class="file-tabs" role="tablist" aria-label="Project files">
          <button class="file-tab is-active" data-file="app" role="tab" aria-selected="true">app.njk</button>
          <button class="file-tab" data-file="layout" role="tab" aria-selected="false">layout.njk</button>
          <button class="file-tab" data-file="card" role="tab" aria-selected="false">partials/user-card.njk</button>
          <button class="file-tab" data-file="stats" role="tab" aria-selected="false">partials/stats.njk</button>
          <button class="file-tab" data-file="macros" role="tab" aria-selected="false">macros/ui.njk</button>
        </div>

        <div class="file-panel is-active" data-file="app" role="tabpanel">
<pre><code class="language-django">{% extends "layout.njk" %}
{% import "macros/ui.njk" as ui %}

{% block title %}Team Dashboard{% endblock %}

{% block body %}
  {% set activeUsers = users | selectattr("active") %}

  <h2>{{ team.name | title }}</h2>
  <p>Active users: {{ activeUsers | length }}</p>

  {% for grp in users | groupby("role", "none") %}
    <h3>{{ grp.grouper | upper }} ({{ grp.list | length }})</h3>
    {% for user in grp.list | sort(false, false, "name") %}
      {% include "partials/user-card.njk" with context %}
    {% endfor %}
  {% endfor %}

  {% include "partials/stats.njk" with context %}

  {% call ui.panel("success") %}
    Rendered at steps: {{ range(1, 8, 2) | join(",") }}
  {% endcall %}
{% endblock %}</code></pre>
        </div>

        <div class="file-panel" data-file="layout" role="tabpanel" hidden>
<pre><code class="language-django"><!doctype html>
<html>
  <head>
    <title>{% block title %}Dashboard{% endblock %}</title>
  </head>
  <body>
    <header>
      {% block header %}Nunchucks{% endblock %}
    </header>
    <main>
      {% block body %}{% endblock %}
    </main>
  </body>
</html></code></pre>
        </div>

        <div class="file-panel" data-file="card" role="tabpanel" hidden>
<pre><code class="language-django"><article class="user-card">
  <strong>{{ user.name | title }}</strong>
  <small>{{ user.email | lower }}</small>
  <p>Tags: {{ user.tags | join(", ") }}</p>
  <p>Bio words: {{ user.bio | wordcount }}</p>
  <p>Website: {{ user.website | urlize | safe }}</p>
</article></code></pre>
        </div>

        <div class="file-panel" data-file="stats" role="tabpanel" hidden>
<pre><code class="language-django">{% set topKey = scores | dictsort("value", false, true) | first | first %}
<section class="stats">
  <p>Top score key: {{ topKey }}</p>
  <p>Average-ish: {{ scoresList | sum | round(2) }}</p>
  <p>First bucket size: {{ users | batch(2) | first | length }}</p>
</section></code></pre>
        </div>

        <div class="file-panel" data-file="macros" role="tabpanel" hidden>
<pre><code class="language-django">{% macro panel(kind="info") %}
<section class="panel panel-{{ kind }}">
  {{ caller() }}
</section>
{% endmacro %}

{% macro badge(text, kind="neutral") %}
<span class="badge badge-{{ kind }}">{{ text | upper }}</span>
{% endmacro %}</code></pre>
        </div>
      </aside>
    </div>
  </main>

  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js"></script>
  <script defer src="./assets/docs.js"></script>
</body>
</html>
